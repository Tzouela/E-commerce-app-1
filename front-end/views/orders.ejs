<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>User Orders</title>
  <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css' />
</head>

<body class="bg-body-secondary">
  <%-include('./partials/navbar.ejs')%>
    <div class="container-fluid">
      <div class="mt-5">

        <div class="d-flex justify-content-between mb-3">
          <h2>User Orders</h2>
        </div>

        <div class="table-responsive">
          <table class="table w-100">
            <thead class="table-dark">
              <tr>
                <th>Orders</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <div class="table-responsive">
                    <table class="table table-striped table-bordered w-100">
                      <thead>
                        <tr>
                          <th>ID</th>
                          <th>Order Number</th>
                          <th>Created</th>
                          <th>Updated</th>
                          <th>User ID</th>
                          <th>Order Status</th>
                        </tr>
                      </thead>
                      <tbody>
                        <% orders.forEach(function(order) { %>
                          <tr>
                            <td>
                              <%= order.id %>
                            </td>
                            <td>
                              <%= order.order_number %>
                            </td>
                            <td>
                              <%= order.created_at %>
                            </td>
                            <td>
                              <%= order.updated_at %>
                            </td>
                            <td>
                              <%= order.userId %>
                            </td>
                            <td>
                              <form action="/orders/<%= order.id %>/status?_method=PUT" method="POST" class="d-inline">
                                <select name="newStatus" class="form-select form-select-sm"
                                  onchange="this.form.submit()">
                                  <% [ 'In progress' , 'Ordered' , 'Completed' ].forEach(function(s) { %>
                                    <option value="<%= s %>" <%=order.status===s ? 'selected' : '' %>>
                                      <%= s %>
                                    </option>
                                    <% }); %>
                                </select>
                              </form>
                            </td>
                          </tr>
                          <% }); %>
                      </tbody>
                    </table>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js">
    </script>
</body>

</html>